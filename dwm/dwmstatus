#: Seperator to divide each value on the statusbar.
sep="|"

#: MPD Now Playing Widget
#: If no song is playing, it will not appear. As such, this should be accounted
#: for when setting your statusbar.
getMpd()
{
    if [ "`mpc | sed '2q;d' | grep playing | wc -l`" != 1 ]; then
        echo -ne ""
    else
        mpctime="`mpc | sed '2q;d' | grep playing | awk '{ print $3 }'`"
        echo -ne "$sep `mpc | head -1 | cut -c 1-200` [$mpctime] "
    fi
}

#: Date Widget
#: Formatted as:
#:     $DAY, $MONTH $DATE $TIME
getDate()
{
    echo -ne $(date +"%a %b %d %r")
}

#: DWM's statusbar is printed as the value of `xsetroot -name`
#: This is somewhat a hackish way of making a statusbar.
while true; do
    xsetroot -name  "$(getMpd)$sep $(getDate) $sep" 
    sleep 1s
done &
